# 个人健康管理系统 - 完整技术栈报告

# 一、系统概述

## 1.1 系统定位

面向个人用户的健康数据管理、心脏疾病知识查询、AI 健康咨询一体化平台，以“数据采集-分析-干预-溯源”为核心闭环，提供健康档案管理、日常数据追踪、知识图谱可视化、智能问答等功能，助力用户实现个性化健康管理。

## 1.2 核心目标

- 技术目标：采用前后端分离架构，实现双数据库协同、知识图谱可视化、AI 接口集成，保障系统高性能与可扩展性。

- 功能目标：覆盖健康管理全场景，支持智能设备数据同步、心脏疾病知识关联查询、个性化健康方案生成。

- 体验目标：采用绿色简约风，分栏式布局，统一 UI 样式，提供流畅的交互体验与清晰的数据可视化效果。

- ![ui](D:\26WinterVacation\health_ai_assistant\img\ui.jpg)

## 1.3 关键技术亮点

- 双数据库协同：MySQL 存储结构化业务数据，Neo4j 承载心脏疾病知识图谱，兼顾事务性与图查询性能。

- AI 智能集成：接入 DeepSeek API，实现健康咨询、症状自查等智能问答功能，缓存高频问答降低调用成本。

- 可视化能力：基于 ECharts 实现健康数据趋势分析与心脏疾病知识图谱网络渲染，支持交互操作。

- 全局样式统一：封装可复用 CSS 样式板，实现页面组件风格一致性，提升开发效率与用户体验。

# 二、核心技术栈选型

## 2.1 技术栈清单

|技术分类|技术选型|版本要求|核心作用|
|---|---|---|---|
|后端技术|Spring Boot|3.x|后端项目脚手架，提供自动配置、依赖注入、RESTful API 开发能力，支持 Java 17+ 特性，性能优于 2.x 版本。（Java使用21版本的）|
||JWT|最新稳定版|实现前后端分离架构下的用户身份认证与接口权限控制，保障接口安全。|
||JPA||实现关系型映射|
|前端技术|Vue|3.x（组合式 API）|前端核心框架，通过 setup 语法实现组件逻辑复用，支持响应式数据绑定，适配复杂交互场景。（使用typescript语法）|
||Element Plus|最新稳定版|基于 Vue 3 的桌面端 UI 组件库，提供表单、表格、导航等开箱即用组件，快速搭建前端页面。|
||Vite|最新稳定版|前端构建工具，提升开发热更新速度与生产环境构建效率，减小打包体积。|
||ECharts|5.x|实现健康数据趋势图表、心脏疾病知识图谱网络可视化渲染，支持节点交互。|
|数据库技术|MySQL|8.0+|存储结构化业务数据，如用户信息、健康档案、用药记录、运动计划等，支持事务 ACID 特性。|
||Neo4j|5.x|图数据库，存储心脏疾病知识图谱数据（疾病、症状、病因、治疗方案等节点及关联关系），支持高效图查询。|
|中间件技术|Redis|6.x+|缓存热点数据（健康看板统计结果、用户会话、AI 问答历史），减轻数据库压力，提升接口响应速度。|
||Docker|最新稳定版|容器化部署 MySQL、Neo4j、Redis 等服务，保障环境一致性，简化部署流程。|
||scrapy||爬起百度网页文本数据，进行清洗处理形成结构化数据存入MySQL|
|辅助工具|Swagger/Knife4j|最新稳定版|自动生成后端 API 文档，方便前后端联调，提升开发协作效率。|
||DeepSeek API|最新稳定版|提供 AI 健康咨询、症状自查等问答能力，后端封装调用逻辑供前端使用。|




## 2.2 选型核心依据

### 2.2.1 后端技术选型理由

Spring Boot 3.x 作为后端核心框架，具备三大核心优势：一是支持 Java 17+ 特性，性能较 2.x 版本大幅提升，且原生支持响应式编程（Spring WebFlux），可优化高并发接口；二是内置 Spring Data JPA 整合能力，简化 MySQL 数据操作，同时提供 Spring Data Neo4j 组件，无缝对接 Neo4j 图数据库，降低开发门槛；三是生态完善，可快速集成 Redis、JWT、Swagger 等工具，满足系统全场景需求。

### 2.2.2 双数据库协同逻辑

采用 MySQL + Neo4j 双数据库架构，核心是“各司其职、优势互补”：

- MySQL 擅长处理结构化、关联性强的业务数据，支持事务一致性，适合存储用户档案、用药记录、运动计划等核心业务数据，保障数据安全性与完整性。

- Neo4j 作为图数据库，在处理“节点-关系”型数据时性能远超关系型数据库，可高效实现“疾病→症状→治疗方案”“疾病→风险因素”等关联查询，完美适配心脏疾病知识图谱的存储与可视化需求。

### 2.2.3 前端技术选型理由

Vue 3 + Element Plus + Vite 组合，适配系统前端开发需求：Vue 3 的组合式 API 更适合开发复杂组件（知识图谱可视化、健康数据录入表单），逻辑复用更灵活；Element Plus 与 Vue 3 深度兼容，组件风格统一，可快速搭建分栏式布局与导航系统，且支持按需引入，减小打包体积；Vite 解决了 Vue 项目开发热更新慢的问题，大幅提升开发效率，同时优化生产环境构建性能。

### 2.2.4 Redis 缓存策略价值

Redis 作为缓存中间件，主要应用于三大场景：一是缓存用户健康数据看板的统计结果（如月度血压趋势、运动时长统计），避免重复计算，提升页面加载速度；二是存储用户登录态（JWT 令牌），实现分布式环境下的会话共享；三是缓存 AI 问答的高频问题与答案，降低 DeepSeek API 调用频率，节省成本，同时提升问答响应速度。

# 三、系统架构设计

## 3.1 整体架构（前后端分离）

系统采用分层架构设计，从下至上分为数据层、服务层、接口层、前端层，各层职责清晰，松耦合易扩展：

1. 数据层：MySQL + Neo4j + Redis，负责数据存储、缓存与图数据管理，提供数据持久化与高效查询能力。

2. 服务层：Spring Boot 后端服务，包含业务逻辑处理、数据访问、AI 接口封装、权限校验等核心能力，实现双数据库协同与中间件集成。

3. 接口层：基于 RESTful 规范设计 API，通过 JWT 实现权限控制，Swagger 生成接口文档，供前端调用。

4. 前端层：Vue 3 前端应用，通过 Element Plus 构建 UI，ECharts 实现可视化，封装全局样式保证风格统一，提供分栏式布局与交互体验。

## 3.2 后端架构（分层设计）

### 3.2.1 包结构设计

```java

com.health
├── config         // 配置类（数据源、Redis、Neo4j、跨域、JWT、DeepSeek API）
├── controller     // 控制层（接收前端请求，返回响应，权限校验）
├── service        // 服务层（核心业务逻辑处理）
│   ├── impl       // 服务实现类（健康数据处理、AI 调用、图数据查询）
├── repository     // 图数据访问层（Spring Data Neo4j 接口，操作 Neo4j 数据）
├── entity         // 实体类（MySQL 实体、Neo4j 节点/关系实体）
│   ├── mysql      // MySQL 实体（用户、健康档案、用药记录等）
│   ├── neo4j      // Neo4j 实体（疾病、症状、治疗方案等节点/关系）
├── dto            // 数据传输对象（前后端交互数据格式，请求/响应参数）
├── vo             // 视图对象（前端展示数据格式，如统计结果、图谱数据）
├── util           // 工具类（加密、日期、API 调用、ECharts 数据转换）
├── exception      // 全局异常处理（自定义异常、统一响应格式）
└── HealthApplication.java  // 项目启动类
```

### 3.2.2 核心模块职责

- 配置层：统一管理数据源、缓存、AI 接口等配置，支持环境差异化配置（开发/测试/生产）。

- 控制层：按功能模块划分控制器（用户Controller、健康数据Controller、知识图谱Controller、AI问答Controller），接收前端请求并调用服务层处理。

- 服务层：整合双数据库数据，实现核心业务逻辑，如健康数据统计分析、知识图谱节点关联查询、DeepSeek API 调用与结果处理。

- 数据访问层：分别对接 MySQL 与 Neo4j，通过 JPA 实现结构化数据 CRUD，通过 Spring Data Neo4j 实现图数据查询与关联操作。

## 3.3 前端架构（基于 Vite）

### 3.3.1 目录结构设计

```javascript

src
├── api            // 接口请求封装（Axios 实例配置、各模块接口函数）
├── assets         // 静态资源（全局样式、图片、图标）
│   ├── css        // 全局样式（global.css 复用样式板、common.css 基础样式）
│   ├── images     // 图片资源（logo、图标等）
├── components     // 公共组件（知识图谱组件、数据可视化组件、表单组件）
│   ├── common     // 通用组件（按钮、卡片、加载组件）
│   ├── graph      // 知识图谱可视化组件
│   ├── chart      // 健康数据图表组件
├── layouts        // 布局组件（根布局、分栏布局、导航组件）
├── router         // 路由配置（Vue Router，按功能模块划分路由）
├── store          // 状态管理（Pinia，存储用户信息、全局配置、缓存数据）
├── views          // 页面视图（按功能模块划分）
│   ├── Home       // 首页（健康数据总览看板）
│   ├── Archive    // 健康档案管理页面
│   ├── DataTrack  // 日常健康数据追踪页面
│   ├── Graph      // 心脏疾病知识图谱页面
│   ├── AiQa       // AI 健康问答页面
│   ├── Plan       // 个性化健康计划页面
│   ├── Medicine   // 用药管理页面
│   ├── Service    // 医疗服务对接页面
│   ├── Setting    // 系统设置页面
├── utils          // 工具类（缓存、日期、ECharts 初始化、格式校验）
├── App.vue        // 根组件
└── main.js        // 入口文件（全局引入依赖、初始化配置）
```

### 3.3.2 核心模块职责

- 布局模块：根布局采用分栏式设计（左侧导航、右侧内容），封装全局导航与页面框架，保证风格统一。

- 接口模块：封装 Axios 实例，统一处理请求拦截、响应拦截、异常捕获，按功能模块划分接口函数，便于维护。

- 组件模块：拆分通用组件与业务组件，通用组件（卡片、表单）全局复用，业务组件（知识图谱、图表）按需引入，提升开发效率。

- 状态管理：通过 Pinia 存储用户登录态、全局配置（如主题色）、高频缓存数据，实现组件间数据共享。

# 四、核心技术整合方案

## 4.1 双数据库（MySQL + Neo4j）整合

### 4.1.1 数据源配置

在 Spring Boot 3.x 中配置双数据源，通过注解区分数据访问范围：

- MySQL 数据源：通过 application.yml 配置数据库连接信息，用户名：root，密码：654321，开发阶段连接本地数据库
- Neo4j 数据源：配置 Neo4j 连接地址、用户名密码，使用 @EnableNeo4jRepositories("com.health.repository") 扫描 Neo4j 的 Repository 接口。

### 4.1.2 图数据模型设计

定义心脏疾病知识图谱核心节点与关系，通过 Spring Data Neo4j 注解映射：

1. 核心节点：
        

    - Disease（疾病）：属性包括 id、名称、类型、简介、发病率。

    - Symptom（症状）：属性包括 id、名称、描述、出现频率。

    - RiskFactor（风险因素）：属性包括 id、名称、类型（生活习惯/遗传/环境）。

    - Treatment（治疗方案）：属性包括 id、名称、类型（药物/手术/护理）、描述。

    - Drug（药物）：属性包括 id、名称、功效、用法用量、禁忌。

2. 核心关系：
        

    - HAS_SYMPTOM（疾病-有症状）：Disease → Symptom。

    - HAS_RISK_FACTOR（疾病-有风险因素）：Disease → RiskFactor。

    - HAS_TREATMENT（疾病-有治疗方案）：Disease → Treatment。

    - BELONGS_TO（治疗方案-包含药物）：Treatment → Drug。

### 4.1.3 数据整合逻辑

业务层根据需求整合两类数据：例如查询用户心脏疾病风险时，先从 MySQL 读取用户健康档案（既往病史、血压/心率数据），再从 Neo4j 查询关联疾病的风险因素与症状，综合分析后返回结果。

## 4.2 Redis 缓存整合

### 4.2.1 缓存策略

- 热点数据缓存：用户健康数据看板统计结果（如月度血压趋势、运动时长统计），缓存有效期设为 1 小时，缓存未命中时从数据库查询并写入 Redis。

- 会话缓存：用户登录态（JWT 令牌）存储在 Redis 中，设置过期时间，实现分布式环境下的会话共享与登出失效。

- AI 问答缓存：高频健康问题与答案缓存，有效期设为 24 小时，降低 DeepSeek API 调用频率。

### 4.2.2 缓存实现

配置 RedisTemplate，封装缓存工具类（CacheUtil），提供 get、set、delete 等方法，通过注解（@Cacheable、@CacheEvict）或手动调用实现缓存操作，解决并发场景下的数据一致性问题（如分布式锁）。

## 4.3 DeepSeek AI 问答整合

### 4.3.1 接口封装

后端封装 DeepSeek API 调用工具类（DeepSeekUtil），通过 RestTemplate 发送 POST 请求，设置 API 密钥、请求参数（问题内容、模型类型、对话历史），处理 API 返回结果（格式化回答内容，使用markdown进行render）。

```yml
# Deepseek API Configuration
deepseek:
  api:
        key: ${DEEPSEEK_API_KEY:}  // sk-60d66670e675480d95b07d3d41610b64 这是我的密钥，先使用这个代替，后期再使用占位符
    model: deepseek-chat
    baseUrl: https://api.deepseek.com/
```



### 4.3.2 前后端交互

前端通过 Axios 调用后端封装的 AI 问答接口，传递用户问题与对话历史；后端先查询 Redis 缓存，命中则直接返回结果，未命中则调用 DeepSeek API，获取结果后写入缓存并返回给前端；同时记录对话历史到 MySQL，支持用户查看历史问答。

## 4.4 知识图谱可视化（Neo4j + ECharts）整合

### 4.4.1 数据转换

后端从 Neo4j 中查询疾病、症状、治疗方案等节点与关系数据，通过工具类转换为 ECharts 图谱所需的 nodes（节点数组）和 links（关系数组）格式：

- nodes：包含 id、name、category（节点类型）、symbolSize（节点大小）等属性。

- links：包含 source（源节点 id）、target（目标节点 id）、name（关系名称）等属性。

### 4.4.2 前端渲染

前端封装知识图谱组件（GraphComponent），通过 ECharts 的 graph 图表类型渲染：

- 初始化 ECharts 实例，绑定健康图谱容器样式（health-graph-container）。

- 配置图谱参数，支持节点拖拽、点击高亮关联节点、关系提示等交互操作。

- 通过接口获取后端转换后的图谱数据，赋值给 ECharts 配置项，实现图谱渲染与动态更新。

## 4.5 全局样式整合

### 4.5.1 样式板引入

将全局复用 CSS 样式板（global.css）放入 src/assets/css 目录，在 main.js 中全局引入，通过类名直接复用容器、卡片、表单等样式，保证页面风格统一。

### 4.5.2 样式适配

结合 Element Plus 组件样式，通过全局样式板覆盖默认样式，实现蓝色科技简约风：

- 导航菜单：基本项颜色为#1F9F84，文字色为白色。

- 卡片组件：没有选中，卡片颜色为#EEF8EE，hover 时显示蓝色阴影，边框颜色变为 primary-light，颜色变成提升交互体验。

- 数据可视化：图表线条/柱状图颜色使用#1F9F84 ，辅助色用 primary-hover（#FD5C23），与整体风格统一。

# 五、数据来源与处理方案

## 5.1 数据来源

### 5.1.1 知识图谱数据（心脏疾病）

采用“开源数据集+自建补充”方案，兼顾效率与权威性：

1. 开源数据集复用：
        

    - MedicalKG：GitHub 搜索 `MedicalKG`，下载中文医疗知识图谱，提取心脏疾病相关子集（疾病、症状、药品关联数据），格式为 CSV/JSON，可直接导入 Neo4j。

    - KG-Health：Gitee 搜索获取，聚焦慢病数据，心脏疾病模块标注细致，附带 Neo4j 导入脚本。

2. 自建补充爬取：

    - 爬取来源：国家心血管病中心官网、丁香园医学知识库、Mayo Clinic 心脏疾病专题（遵守 robots.txt 协议，商业用途需授权）。

    - 爬取内容：心脏疾病风险因素（生活习惯关联）、最新治疗方案、预防措施，补充开源数据覆盖不足的场景。

3. 权威数据补充：国家健康科学数据中心开放数据集，申请免费获取标准化心血管疾病诊疗数据，提升数据可信度。

### 5.1.2 业务数据（用户健康数据）

- 手动录入：用户通过前端表单录入基础信息、健康档案、用药记录、生活习惯等数据。

- 智能设备同步：支持手环、血压计、血糖仪等智能设备的数据同步（通过设备 API 接口获取，或用户手动上传设备数据文件）。

- 医疗数据导入：支持用户上传体检报告（PDF/图片），后端解析关键指标（如血压、血糖、心率）存入 MySQL。

## 5.2 数据处理流程

1. 数据爬取与清洗：使用 Python Scrapy 爬取权威医疗网站数据，通过 Pandas 清洗去重、结构化整理，转换为 Neo4j 导入格式。

2. 数据导入：
        

    - Neo4j：通过 neo4j-admin import 命令导入结构化的节点与关系数据，或通过 Spring Data Neo4j 批量插入。

    - MySQL：通过JPA 批量插入用户数据、健康档案等业务数据，建立索引提升查询性能。

3. 数据更新：知识图谱数据定期（每月）从开源数据集与权威网站同步更新；业务数据实时写入 MySQL，热点数据同步更新至 Redis。

# 六、部署方案

## 6.1 部署环境

- 服务器：腾讯云服务器（2核4G及以上，CentOS 7.x/8.x 系统）。

- 容器化工具：Docker + Docker Compose（部署 MySQL、Neo4j、Redis 服务）。

- Web 服务器：Nginx（部署前端静态资源，反向代理后端 API）。

- SSL 证书：不使用https，直接使用http                                                 

## 6.2 部署流程

1. 环境准备：在服务器安装 Docker、Docker Compose、JDK 21、Maven、Nginx。

2. 数据库部署：通过 Docker Compose 配置 MySQL、Neo4j、Redis 容器，设置数据持久化目录，启动服务并初始化数据。

3. 后端部署：
        

    - 通过 Maven 打包 Spring Boot 项目为 Jar 包，或构建为 Docker 镜像。

    - 通过 nohup 命令后台运行 Jar 包（或启动 Docker 镜像），配置日志输出目录。

    - 通过 Spring Boot Actuator 监控后端服务状态。

4. 前端部署：
        

    - 通过 Vite 打包 Vue 项目为静态资源（dist 目录）。

    - 将静态资源复制到 Nginx 网站根目录，配置 Nginx 反向代理，将前端 API 请求转发至后端服务。

5. SSL 配置：在 Nginx 中配置 SSL 证书，强制跳转 HTTPS，保障数据传输安全。

6. 监控与维护：配置服务器监控工具，定期备份数据库数据，查看服务日志与缓存使用情况。

# 七、数据安全方案

## 7.1 数据存储安全

- 用户密码安全：通过 BCrypt 加盐哈希存储，不存储明文密码，防止数据泄露。

- 敏感数据加密：用户病历、体检报告等敏感健康数据，在 MySQL 中加密存储，读取时解密。

- 数据库权限控制：MySQL、Neo4j 分别设置独立账号密码，仅开放必要操作权限，限制访问 IP。

## 7.2 接口安全

- 权限认证：通过 JWT 实现接口权限控制，前端请求携带 Token，后端验证 Token 有效性与过期时间，无效则返回 401 状态码。

- 接口限流：通过 Redis 实现接口限流，防止高频请求攻击，保护后端服务。

- 跨域安全：后端配置 CORS 跨域规则，仅允许指定前端域名访问，禁止非法跨域请求。

# 八、扩展与优化方向

## 8.1 功能扩展

- 多端适配：开发移动端 H5 版本，支持响应式布局，适配手机、平板等设备。

- 多语言支持：添加中英文切换功能，适配国际化需求。

- 健康预警升级：结合机器学习模型，基于用户历史数据预测健康风险，提供更精准的预警与干预建议。

## 8.2 性能优化

- 数据库优化：MySQL 建立联合索引提升查询性能，Neo4j 优化图查询语句，减少冗余查询。

- 缓存优化：细化 Redis 缓存策略，设置合理的缓存有效期，避免缓存雪崩、缓存穿透问题。

- 前端优化：实现路由懒加载、组件按需引入，优化 ECharts 图谱渲染性能，减少页面加载时间。

## 8.3 运维优化

- 日志管理：集成 ELK 日志收集分析系统，统一管理前后端日志，便于问题排查。

- 自动化部署：搭建 Jenkins 自动化构建部署流水线，实现代码提交后自动打包、部署、测试。

- 弹性扩展：基于 Kubernetes 实现容器编排，支持服务弹性扩容，应对高并发场景。

# 九、总结

本系统采用 Spring Boot 3.x + Vue 3 + MySQL + Neo4j + Element Plus + Redis 核心技术栈，构建了一套功能完整、性能稳定、体验优良的个人健康管理平台。通过双数据库协同、AI 接口集成、知识图谱可视化与全局样式统一，实现了健康数据管理、智能咨询、知识查询等核心功能，同时具备良好的可扩展性与安全性。

系统设计兼顾开发效率与用户体验，开源数据集与自建数据结合保障了知识图谱的权威性与完整性，容器化部署简化了运维流程，可满足个人用户日常健康管理的核心需求，也可基于此架构进行二次开发与功能扩展。